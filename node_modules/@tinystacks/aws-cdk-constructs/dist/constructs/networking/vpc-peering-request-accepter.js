"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.VpcPeeringRequestAccepter = void 0;
const custom_resources_1 = require("aws-cdk-lib/custom-resources");
class VpcPeeringRequestAccepter extends custom_resources_1.AwsCustomResource {
    constructor(scope, id, props) {
        const { vpcArn, peeringConnectionId, accountId, region } = props;
        const acceptPeeringConnection = {
            service: 'EC2',
            action: 'acceptVpcPeeringConnection',
            parameters: {
                VpcPeeringConnectionId: peeringConnectionId
            },
            physicalResourceId: custom_resources_1.PhysicalResourceId.of(id)
        };
        const policy = custom_resources_1.AwsCustomResourcePolicy.fromSdkCalls({
            resources: [
                vpcArn,
                `arn:aws:ec2:${region}:${accountId}:vpc-peering-connection/*`
            ]
        });
        super(scope, id, {
            onCreate: acceptPeeringConnection,
            onUpdate: acceptPeeringConnection,
            policy
        });
    }
}
exports.VpcPeeringRequestAccepter = VpcPeeringRequestAccepter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidnBjLXBlZXJpbmctcmVxdWVzdC1hY2NlcHRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb25zdHJ1Y3RzL25ldHdvcmtpbmcvdnBjLXBlZXJpbmctcmVxdWVzdC1hY2NlcHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxtRUFBMEg7QUFVMUgsTUFBYSx5QkFBMEIsU0FBUSxvQ0FBaUI7SUFDOUQsWUFBYSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFxQztRQUM5RSxNQUFNLEVBQ0osTUFBTSxFQUNOLG1CQUFtQixFQUNuQixTQUFTLEVBQ1QsTUFBTSxFQUNQLEdBQUcsS0FBSyxDQUFDO1FBRVYsTUFBTSx1QkFBdUIsR0FBZTtZQUMxQyxPQUFPLEVBQUUsS0FBSztZQUNkLE1BQU0sRUFBRSw0QkFBNEI7WUFDcEMsVUFBVSxFQUFFO2dCQUNWLHNCQUFzQixFQUFFLG1CQUFtQjthQUM1QztZQUNELGtCQUFrQixFQUFFLHFDQUFrQixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7U0FDOUMsQ0FBQztRQUVGLE1BQU0sTUFBTSxHQUFHLDBDQUF1QixDQUFDLFlBQVksQ0FBQztZQUNsRCxTQUFTLEVBQUU7Z0JBQ1QsTUFBTTtnQkFDTixlQUFlLE1BQU0sSUFBSSxTQUFTLDJCQUEyQjthQUM5RDtTQUNGLENBQUMsQ0FBQztRQUVILEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQ2YsUUFBUSxFQUFFLHVCQUF1QjtZQUNqQyxRQUFRLEVBQUUsdUJBQXVCO1lBQ2pDLE1BQU07U0FDUCxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUEvQkQsOERBK0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXdzQ3VzdG9tUmVzb3VyY2UsIEF3c0N1c3RvbVJlc291cmNlUG9saWN5LCBBd3NTZGtDYWxsLCBQaHlzaWNhbFJlc291cmNlSWQgfSBmcm9tICdhd3MtY2RrLWxpYi9jdXN0b20tcmVzb3VyY2VzJztcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZwY1BlZXJpbmdSZXF1ZXN0QWNjZXB0ZXJQcm9wcyB7XG4gIHBlZXJpbmdDb25uZWN0aW9uSWQ6IHN0cmluZ1xuICB2cGNBcm46IHN0cmluZ1xuICBhY2NvdW50SWQ6IHN0cmluZ1xuICByZWdpb246IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgVnBjUGVlcmluZ1JlcXVlc3RBY2NlcHRlciBleHRlbmRzIEF3c0N1c3RvbVJlc291cmNlIHtcbiAgY29uc3RydWN0b3IgKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBWcGNQZWVyaW5nUmVxdWVzdEFjY2VwdGVyUHJvcHMpIHtcbiAgICBjb25zdCB7XG4gICAgICB2cGNBcm4sXG4gICAgICBwZWVyaW5nQ29ubmVjdGlvbklkLFxuICAgICAgYWNjb3VudElkLFxuICAgICAgcmVnaW9uXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgYWNjZXB0UGVlcmluZ0Nvbm5lY3Rpb246IEF3c1Nka0NhbGwgPSB7XG4gICAgICBzZXJ2aWNlOiAnRUMyJyxcbiAgICAgIGFjdGlvbjogJ2FjY2VwdFZwY1BlZXJpbmdDb25uZWN0aW9uJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgVnBjUGVlcmluZ0Nvbm5lY3Rpb25JZDogcGVlcmluZ0Nvbm5lY3Rpb25JZFxuICAgICAgfSxcbiAgICAgIHBoeXNpY2FsUmVzb3VyY2VJZDogUGh5c2ljYWxSZXNvdXJjZUlkLm9mKGlkKVxuICAgIH07XG5cbiAgICBjb25zdCBwb2xpY3kgPSBBd3NDdXN0b21SZXNvdXJjZVBvbGljeS5mcm9tU2RrQ2FsbHMoe1xuICAgICAgcmVzb3VyY2VzOiBbXG4gICAgICAgIHZwY0FybixcbiAgICAgICAgYGFybjphd3M6ZWMyOiR7cmVnaW9ufToke2FjY291bnRJZH06dnBjLXBlZXJpbmctY29ubmVjdGlvbi8qYFxuICAgICAgXVxuICAgIH0pO1xuXG4gICAgc3VwZXIoc2NvcGUsIGlkLCB7XG4gICAgICBvbkNyZWF0ZTogYWNjZXB0UGVlcmluZ0Nvbm5lY3Rpb24sXG4gICAgICBvblVwZGF0ZTogYWNjZXB0UGVlcmluZ0Nvbm5lY3Rpb24sXG4gICAgICBwb2xpY3lcbiAgICB9KTtcbiAgfVxufSJdfQ==