"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.truncateWithSemiHash = void 0;
const crypto_1 = __importDefault(require("crypto"));
function truncateWithSemiHash(name, maxLength) {
    if (name.length > maxLength) {
        const hash = crypto_1.default.createHash('md5').update(name).digest('hex');
        // last 8 characters yields a 0.000005 chance of collision
        const semiHash = hash.substring(hash.length - 8);
        const truncName = name.substring(0, maxLength - 8);
        return truncName + semiHash;
    }
    else {
        return name;
    }
}
exports.truncateWithSemiHash = truncateWithSemiHash;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJ1bmNhdGUtdy1oYXNoLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL25hbWluZy90cnVuY2F0ZS13LWhhc2gudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsb0RBQTRCO0FBRTVCLFNBQVMsb0JBQW9CLENBQUUsSUFBWSxFQUFFLFNBQWlCO0lBQzVELElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxTQUFTLEVBQUU7UUFDM0IsTUFBTSxJQUFJLEdBQUcsZ0JBQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVqRSwwREFBMEQ7UUFDMUQsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRWpELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuRCxPQUFPLFNBQVMsR0FBRyxRQUFRLENBQUM7S0FDN0I7U0FBTTtRQUNMLE9BQU8sSUFBSSxDQUFDO0tBQ2I7QUFDSCxDQUFDO0FBR0Msb0RBQW9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuXG5mdW5jdGlvbiB0cnVuY2F0ZVdpdGhTZW1pSGFzaCAobmFtZTogc3RyaW5nLCBtYXhMZW5ndGg6IG51bWJlcikge1xuICBpZiAobmFtZS5sZW5ndGggPiBtYXhMZW5ndGgpIHtcbiAgICBjb25zdCBoYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpLnVwZGF0ZShuYW1lKS5kaWdlc3QoJ2hleCcpO1xuICAgIFxuICAgIC8vIGxhc3QgOCBjaGFyYWN0ZXJzIHlpZWxkcyBhIDAuMDAwMDA1IGNoYW5jZSBvZiBjb2xsaXNpb25cbiAgICBjb25zdCBzZW1pSGFzaCA9IGhhc2guc3Vic3RyaW5nKGhhc2gubGVuZ3RoIC0gOCk7XG4gICAgXG4gICAgY29uc3QgdHJ1bmNOYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgbWF4TGVuZ3RoIC0gOCk7XG4gICAgcmV0dXJuIHRydW5jTmFtZSArIHNlbWlIYXNoO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuYW1lO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIHRydW5jYXRlV2l0aFNlbWlIYXNoXG59OyJdfQ==